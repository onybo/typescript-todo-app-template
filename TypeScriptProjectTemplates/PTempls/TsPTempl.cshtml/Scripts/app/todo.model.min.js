var Todo;(function(n){(function(n){var t=function(){function n(n,t){var i=this;t=t||this.defaultTodoListData(),this.TodoListId=t.TodoListId,this.UserId=t.UserId||"to be replaced",this.Title=ko.observable(t.Title||"My todos"),this.IsEditingListTitle=ko.observable(!1),this.NewTodoTitle=ko.observable(),this.ErrorMessage=ko.observable(),this.datacontext=n,this.deleteTodo=function(n){var t=i;return i.datacontext.deleteTodoItem(n).done(function(){t.Todos.remove(n)})},this.save=function(){i.datacontext.saveChangedTodoList(i)},this.Title.subscribe(this.save),this.Todos=ko.observableArray(this.importTodoItems(t.Todos))}return n.prototype.defaultTodoListData=function(){return{TodoListId:"0",UserId:"",Title:"",Todos:[]}},n.prototype.importTodoItems=function(n){var t=this;return $.map(n||[],function(n){return t.datacontext.createTodoItem(n)})},n.prototype.addTodo=function(){if(this.NewTodoTitle()){var n=this.datacontext.createTodoItem({TodoItemId:"0",Title:this.NewTodoTitle(),IsDone:!1,TodoListId:this.TodoListId});this.Todos.push(n),this.datacontext.saveNewTodoItem(n),this.NewTodoTitle("")}},n}();n.TodoList=t})(n.Model||(n.Model={}));var t=n.Model})(Todo||(Todo={}))